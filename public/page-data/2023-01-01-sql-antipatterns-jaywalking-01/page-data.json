{"componentChunkName":"component---src-templates-blog-post-js","path":"/2023-01-01-sql-antipatterns-jaywalking-01/","result":{"data":{"site":{"siteMetadata":{"title":"Jackie's Blog"}},"markdownRemark":{"id":"9581d8b2-0d4a-570f-9311-7647960d17cc","excerpt":"Related posts Các bài posts về Antipatterns Summary I. Antipattern là gì? 1. Khái niệm 2. Cấu trúc database minh họa II. Jaywalking 1. Mục đích 2. Antipatterns…","html":"<h3 id=\"related-posts\" style=\"position:relative;\"><a href=\"#related-posts\" aria-label=\"related posts permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Related posts</h3>\n<blockquote>\n<ul>\n<li><a href=\"//tags/antipatterns\">Các bài posts về Antipatterns</a></li>\n</ul>\n</blockquote>\n<h3 id=\"summary\" style=\"position:relative;\"><a href=\"#summary\" aria-label=\"summary permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Summary</h3>\n<blockquote>\n<ul>\n<li><a href=\"#01\">I. Antipattern là gì?</a>\n<ul>\n<li><a href=\"#01_01\">1. Khái niệm</a></li>\n<li><a href=\"#01_02\">2. Cấu trúc database minh họa</a></li>\n</ul>\n</li>\n<li><a href=\"#02\">II. Jaywalking</a>\n<ul>\n<li><a href=\"#02_01\">1. Mục đích</a></li>\n<li><a href=\"#02_02\">2. Antipatterns</a></li>\n<li><a href=\"#02_03\">3. Phát hiện Antipatterns</a></li>\n<li><a href=\"#02_04\">4. Khi nào sử dụng Antipattern</a></li>\n<li><a href=\"#02_05\">5. Giải pháp thay thế</a></li>\n<li><a href=\"#02_06\">6. Mini-Antipatterns</a></li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<h2 id=\"a-name01ai-antipattern-là-gì\" style=\"position:relative;\"><a href=\"#a-name01ai-antipattern-l%C3%A0-g%C3%AC\" aria-label=\"a name01ai antipattern là gì permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a name=\"01\"></a>I. Antipattern là gì?</h2>\n<h4 id=\"a-name01_01a1-khái-niệm\" style=\"position:relative;\"><a href=\"#a-name01_01a1-kh%C3%A1i-ni%E1%BB%87m\" aria-label=\"a name01_01a1 khái niệm permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a name=\"01_01\"></a>1. Khái niệm</h4>\n<p>Antipattern là cách gọi chung của 1 kỹ thuật giải quyết một vấn đề nhưng thường tạo ra các vấn đề khác. Thông thường bằng một cách vô tình hay cố ý ta thường giải quyết một vấn đề nào đó bằng cách áp dụng một antipattern nào đó.</p>\n<p>Trong các bài posts sắp tới của chuỗi các bài về SQL Antipatterns ta sẽ gặp rất nhiều antipatterns hay được sử dụng, từ đó chúng ta phân tích, đánh giá và tìm các giải pháp thay thế cho các Antipatterns này.</p>\n<p>Chúng ta có thể phân loại các SQL Antipatterns thành 4 loại:</p>\n<ul>\n<li><strong>Logical Database Design Antipatterns</strong>: Ngay ở giai đoạn planing và design ta phải quyết định những thông tin/data gì được tổ chức và lưu trữ trong database. Các Antipatterns này liên quan đến planing và designing tables, columns và relationships.</li>\n<li><strong>Physical Database Design Antipatterns</strong>: Sau khi đã biết những data gì cần lưu trữ thì chúng ta triển khai các quản lý các data này hiệu quả, bao gồm định nghĩa các tables, index và chọn loại data.</li>\n<li><strong>Query Antipatterns</strong>: Thêm, xóa, sửa và query data trong database.</li>\n<li><strong>Application Development Antipatterns</strong>: Khi SQL hỗ trợ để làm việc với tầng application (programming languages)</li>\n</ul>\n<p>Ở mỗi Antipattern ta đều làm việc theo thứ tự với các phần rõ ràng để hiểu về một Antipattern:</p>\n<ul>\n<li><strong>Mục đích</strong></li>\n<li><strong>Mô tả Antipattern</strong></li>\n<li><strong>Làm sao phát hiện Antipattern</strong></li>\n<li><strong>Khi nào được sử dụng Antipattern</strong></li>\n<li><strong>Giải pháp thay thế</strong></li>\n</ul>\n<h4 id=\"a-name01_02a2-cấu-trúc-database-minh-họa\" style=\"position:relative;\"><a href=\"#a-name01_02a2-c%E1%BA%A5u-tr%C3%BAc-database-minh-h%E1%BB%8Da\" aria-label=\"a name01_02a2 cấu trúc database minh họa permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a name=\"01_02\"></a>2. Cấu trúc database minh họa</h4>\n<p>Trong các bài post tiếp theo về Antipatterns chúng ta sẽ minh họa và làm việc dựa trên database bên dưới, một phần mềm bug-tracking.</p>\n<p>Chứa các tables cơ bản như sau:</p>\n<blockquote>\n<p>Table <code class=\"language-text\">Accounts</code>: Chứa đựng các thông tin về một account trong hệ thống</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\">-- Accounts</span>\n<span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> Accounts<span class=\"token punctuation\">(</span>\n  account_id      <span class=\"token keyword\">SERIAL</span> <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span>\n  account_name    <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  first_name      <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  last_name       <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  email           <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  password_hash   <span class=\"token keyword\">CHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">64</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  portrait_image  <span class=\"token keyword\">BLOB</span><span class=\"token punctuation\">,</span>\n  hourly_rate     <span class=\"token keyword\">NUMERIC</span><span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span>\n</code></pre></div>\n<blockquote>\n<p>Table <code class=\"language-text\">BugStatus</code>: Các tình trạng của Bug</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\">-- BusStatus</span>\n<span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> BugStatus<span class=\"token punctuation\">(</span>\n  <span class=\"token keyword\">status</span>    <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span>   <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span>\n<span class=\"token punctuation\">)</span>\n</code></pre></div>\n<blockquote>\n<p>Table <code class=\"language-text\">Bugs</code>: Thông tin về một bug</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\">-- Bugs</span>\n<span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> Bugs<span class=\"token punctuation\">(</span>\n  bug_id          <span class=\"token keyword\">SERIAL</span> <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span><span class=\"token punctuation\">,</span>\n  date_reported   <span class=\"token keyword\">DATE</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">DEFAULT</span><span class=\"token punctuation\">(</span>CURDATE<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  summary         <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">80</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  description     <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  resolution      <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  reported_by     <span class=\"token keyword\">BIGINT</span> <span class=\"token keyword\">UNSIGNED</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n  assigned_to     <span class=\"token keyword\">BIGINT</span> <span class=\"token keyword\">UNSIGNED</span><span class=\"token punctuation\">,</span>\n  verified_by     <span class=\"token keyword\">BIGINT</span> <span class=\"token keyword\">UNSIGNED</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">status</span>          <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token string\">'NEW'</span><span class=\"token punctuation\">,</span>\n  priority        <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  hours           <span class=\"token keyword\">NUMERIC</span><span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">FOREIGN</span> <span class=\"token keyword\">KEY</span><span class=\"token punctuation\">(</span>reported_by<span class=\"token punctuation\">)</span>  <span class=\"token keyword\">REFERENCES</span> Accounts<span class=\"token punctuation\">(</span>account_id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">FOREIGN</span> <span class=\"token keyword\">KEY</span><span class=\"token punctuation\">(</span>assigned_to<span class=\"token punctuation\">)</span>  <span class=\"token keyword\">REFERENCES</span> Accounts<span class=\"token punctuation\">(</span>account_id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">FOREIGN</span> <span class=\"token keyword\">KEY</span><span class=\"token punctuation\">(</span>verified_by<span class=\"token punctuation\">)</span>  <span class=\"token keyword\">REFERENCES</span> Accounts<span class=\"token punctuation\">(</span>account_id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">FOREIGN</span> <span class=\"token keyword\">KEY</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">status</span><span class=\"token punctuation\">)</span>       <span class=\"token keyword\">REFERENCES</span> BugStatus<span class=\"token punctuation\">(</span><span class=\"token keyword\">status</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<blockquote>\n<p>Table <code class=\"language-text\">Comments</code>: Thông tin về một comment</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\">-- Bugs</span>\n<span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> Bugs<span class=\"token punctuation\">(</span>\n  bug_id          <span class=\"token keyword\">SERIAL</span> <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span><span class=\"token punctuation\">,</span>\n  date_reported   <span class=\"token keyword\">DATE</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">DEFAULT</span><span class=\"token punctuation\">(</span>CURDATE<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  summary         <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">80</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  description     <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  resolution      <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  reported_by     <span class=\"token keyword\">BIGINT</span> <span class=\"token keyword\">UNSIGNED</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n  assigned_to     <span class=\"token keyword\">BIGINT</span> <span class=\"token keyword\">UNSIGNED</span><span class=\"token punctuation\">,</span>\n  verified_by     <span class=\"token keyword\">BIGINT</span> <span class=\"token keyword\">UNSIGNED</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">status</span>          <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token string\">'NEW'</span><span class=\"token punctuation\">,</span>\n  priority        <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  hours           <span class=\"token keyword\">NUMERIC</span><span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">FOREIGN</span> <span class=\"token keyword\">KEY</span><span class=\"token punctuation\">(</span>reported_by<span class=\"token punctuation\">)</span>  <span class=\"token keyword\">REFERENCES</span> Accounts<span class=\"token punctuation\">(</span>account_id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">FOREIGN</span> <span class=\"token keyword\">KEY</span><span class=\"token punctuation\">(</span>assigned_to<span class=\"token punctuation\">)</span>  <span class=\"token keyword\">REFERENCES</span> Accounts<span class=\"token punctuation\">(</span>account_id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">FOREIGN</span> <span class=\"token keyword\">KEY</span><span class=\"token punctuation\">(</span>verified_by<span class=\"token punctuation\">)</span>  <span class=\"token keyword\">REFERENCES</span> Accounts<span class=\"token punctuation\">(</span>account_id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">FOREIGN</span> <span class=\"token keyword\">KEY</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">status</span><span class=\"token punctuation\">)</span>       <span class=\"token keyword\">REFERENCES</span> BugStatus<span class=\"token punctuation\">(</span><span class=\"token keyword\">status</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span></code></pre></div>","frontmatter":{"title":"SQL Antipatterns - Jaywalking (01)","date":"January 01, 2023","description":"SQL Antipatterns: Jaywalking"}},"previous":{"fields":{"slug":"/2022-12-14-multi-tasks-in-ruby-say-hi-to-thread-fiber-ractor/"},"frontmatter":{"title":"Đa tác vụ trong Ruby - Gửi lời chào tới Thread, Fiber và Ractor"}},"next":{"fields":{"slug":"/2023-03-07-set-up-ftp-connection-on-aws-ec2/"},"frontmatter":{"title":"Set up FTP connection on AWS EC2"}}},"pageContext":{"id":"9581d8b2-0d4a-570f-9311-7647960d17cc","previousPostId":"65803d60-a7de-5ead-ad26-074b28c70b17","nextPostId":"9ea8ecd3-c77f-5e60-a4eb-714d500dcf73"}},"staticQueryHashes":["230163734","2841359383"],"slicesMap":{}}